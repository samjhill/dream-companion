# Dream Companion App - Architecture Diagrams

## High-Level System Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                        USER INTERFACE                           │
├─────────────────────────────────────────────────────────────────┤
│  React Frontend (Vite + TypeScript)                            │
│  ├── Dream Journal Interface                                   │
│  ├── Heatmap Visualization                                     │
│  ├── Theme Analysis Dashboard                                  │
│  └── Premium Features UI                                       │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                      API GATEWAY                                │
├─────────────────────────────────────────────────────────────────┤
│  AWS API Gateway                                               │
│  ├── Authentication (Cognito JWT)                              │
│  ├── Rate Limiting                                             │
│  ├── CORS Configuration                                        │
│  └── Request Routing                                           │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                    LAMBDA FUNCTIONS                             │
├─────────────────────────────────────────────────────────────────┤
│  Flask Application (Python 3.11)                               │
│  ├── Dream CRUD Operations                                     │
│  ├── AI Dream Analysis Engine                                  │
│  ├── Premium Subscription Management                           │
│  ├── Stripe Payment Integration                                │
│  └── User Memory System                                        │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                      DATA LAYER                                 │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │     S3      │  │  DynamoDB   │  │   Cognito   │             │
│  │             │  │             │  │             │             │
│  │ Dream Data  │  │ Subscriptions│  │   Users     │             │
│  │ Themes      │  │ Memories    │  │   Auth      │             │
│  │ Metadata    │  │ Premium     │  │   JWT       │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                   EXTERNAL SERVICES                             │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   Stripe    │  │ Secrets     │  │ CloudWatch  │             │
│  │             │  │ Manager     │  │             │             │
│  │ Payments    │  │ API Keys    │  │ Logging     │             │
│  │ Webhooks    │  │ Secrets     │  │ Metrics     │             │
│  │ Subscriptions│  │ Config      │  │ Alerts      │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
└─────────────────────────────────────────────────────────────────┘
```

## Data Flow Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                    DREAM INGESTION                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  SMS Input ──┐                                                 │
│              ├──► Data Processing Pipeline                     │
│  Web Input ──┤    ├──► Content Validation                      │
│              │    ├──► Theme Extraction                       │
│  API Input ──┘    ├──► Emotion Analysis                       │
│                   └──► AI Interpretation                       │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                    DATA STORAGE                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────┐                                               │
│  │     S3      │  ┌─────────────┐                              │
│  │             │  │  DynamoDB   │                              │
│  │ Raw Dreams  │  │             │                              │
│  │ Processed   │  │ User Data   │                              │
│  │ Themes      │  │ Premium     │                              │
│  │ Metadata    │  │ Memories    │                              │
│  └─────────────┘  └─────────────┘                              │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                    ANALYTICS & ML                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   Pattern   │  │   Symbol    │  │  Temporal   │             │
│  │ Recognition │  │ Evolution   │  │ Analysis    │             │
│  │             │  │             │  │             │             │
│  │ Archetypes  │  │ Context     │  │ Trends      │             │
│  │ Emotions    │  │ Frequency   │  │ Patterns    │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                    USER INSIGHTS                                │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │  Personal   │  │   Dream     │  │ Premium     │             │
│  │ Insights    │  │ Reports     │  │ Features   │             │
│  │             │  │             │  │             │             │
│  │ Patterns    │  │ Analytics   │  │ Advanced    │             │
│  │ Trends      │  │ Visuals     │  │ Analysis    │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

## Deployment Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                    DEVELOPMENT                                  │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Local Development ──┐                                          │
│                     ├──► Git Repository                         │
│  Feature Branches ──┤    ├──► Code Review                      │
│                     │    ├──► Automated Testing                │
│  Testing ──────────┘    └──► Quality Gates                    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                    CI/CD PIPELINE                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   Build     │  │   Test      │  │   Deploy    │             │
│  │             │  │             │  │             │             │
│  │ SAM Build   │  │ Unit Tests  │  │ SAM Deploy  │             │
│  │ Frontend    │  │ Integration │  │ Frontend    │             │
│  │ Package     │  │ E2E Tests   │  │ S3 Upload   │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                    PRODUCTION                                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   AWS       │  │   AWS       │  │   AWS       │             │
│  │   Lambda    │  │   S3        │  │ CloudWatch  │             │
│  │             │  │             │  │             │             │
│  │ API Gateway │  │ DynamoDB    │  │ Monitoring  │             │
│  │ Cognito     │  │ CloudFront  │  │ Logging     │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

## Security Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                    SECURITY LAYERS                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────┐                                               │
│  │   Frontend  │  ┌─────────────┐                              │
│  │             │  │   API      │                              │
│  │ HTTPS/TLS   │  │ Gateway    │                              │
│  │ CSP Headers │  │             │                              │
│  │ Auth Tokens │  │ Rate Limit  │                              │
│  └─────────────┘  │ CORS       │                              │
│                   │ WAF        │                              │
│                   └─────────────┘                              │
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   Lambda    │  │   Cognito   │  │   IAM       │             │
│  │             │  │             │  │             │             │
│  │ JWT Verify  │  │ User Pool   │  │ Roles       │             │
│  │ Input Valid │  │ MFA         │  │ Policies    │             │
│  │ Error Handle│  │ Password    │  │ Permissions │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │     S3      │  │  DynamoDB   │  │   Secrets   │             │
│  │             │  │             │  │   Manager   │             │
│  │ Encryption  │  │ Encryption  │  │             │             │
│  │ Access Logs │  │ Access Logs│  │ API Keys    │             │
│  │ Versioning  │  │ Backup      │  │ Secrets     │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

## ML Pipeline Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                    DATA COLLECTION                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   SMS       │  │    Web      │  │    API      │             │
│  │             │  │             │  │             │             │
│  │ Raw Text    │  │ Form Input  │  │ JSON Data   │             │
│  │ Timestamps  │  │ Metadata    │  │ Structured  │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                    DATA PROCESSING                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   Text      │  │   Feature   │  │   Quality   │             │
│  │ Cleaning    │  │ Extraction  │  │ Validation  │             │
│  │             │  │             │  │             │             │
│  │ Normalize   │  │ Themes      │  │ Schema      │             │
│  │ Tokenize    │  │ Emotions    │  │ Completeness│             │
│  │ Filter      │  │ Symbols     │  │ Consistency │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                    ML ANALYSIS                                  │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   Pattern   │  │   Temporal  │  │   Symbol   │             │
│  │ Recognition │  │ Analysis    │  │ Evolution  │             │
│  │             │  │             │  │             │             │
│  │ Archetypes  │  │ Time Series │  │ Frequency  │             │
│  │ Emotions    │  │ Trends      │  │ Context    │             │
│  │ Themes      │  │ Patterns    │  │ Changes    │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                    INSIGHTS GENERATION                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   Personal  │  │   Trend     │  │   Actionable│             │
│  │ Insights    │  │ Analysis    │  │ Recommendations│           │
│  │             │  │             │  │             │             │
│  │ Patterns    │  │ Historical  │  │ Suggestions │             │
│  │ Behaviors   │  │ Comparisons │  │ Next Steps  │             │
│  │ Preferences │  │ Predictions │  │ Goals       │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

## Performance Optimization Strategy

```
┌─────────────────────────────────────────────────────────────────┐
│                    FRONTEND OPTIMIZATION                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   Code      │  │   Bundle    │  │   Runtime   │             │
│  │ Splitting   │  │ Optimization│  │ Performance │             │
│  │             │  │             │  │             │             │
│  │ Lazy Load   │  │ Tree Shake  │  │ Memoization │             │
│  │ Dynamic     │  │ Minification│  │ Debouncing  │             │
│  │ Imports     │  │ Compression │  │ Virtual     │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                    BACKEND OPTIMIZATION                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   Database  │  │   Caching   │  │   API      │             │
│  │ Optimization│  │ Strategy    │  │ Optimization│             │
│  │             │  │             │  │             │             │
│  │ Pagination  │  │ S3 Cache    │  │ Compression│             │
│  │ Indexing    │  │ Lambda      │  │ Batching    │             │
│  │ Queries     │  │ Memory      │  │ Connection  │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                    INFRASTRUCTURE OPTIMIZATION                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   CDN       │  │   Lambda    │  │   Monitoring│             │
│  │ CloudFront  │  │ Optimization│  │ & Alerting  │             │
│  │             │  │             │  │             │             │
│  │ Edge Cache  │  │ Cold Start  │  │ Metrics     │             │
│  │ Compression │  │ Memory      │  │ Logs        │             │
│  │ Minification│  │ Timeout     │  │ Alerts      │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

These diagrams illustrate the comprehensive architecture of the Dream Companion App, showing how software engineering, platform engineering, and data engineering work together to create a scalable, secure, and intelligent dream analysis platform.


